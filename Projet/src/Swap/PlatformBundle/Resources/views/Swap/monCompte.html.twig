{% extends "SwapPlatformBundle::layout.html.twig" %}

{% block title %}{{ parent() }} - Index{% endblock %}

{% block body %}

<div class="container">
	<div class="row">
		<div class="col-md-3 col-md-offset-1">
			<div class="panel-body shadow Compte">
				<img class="img-responsive" src="{{asset('bundles/swapplatform/images/silhouette.png') }}">
				<p>{{ user.username }}</p>
				<p>Ma swapBank : {{ user.swapBank }}
				<a href="{{ path('swap_platform_profil') }}">
					<button id="boutonProfil" class="btn btn-primary text-center col-md-12">Modifier mon profil</button>
				</a>
			</div>
		</div>
		<div class="col-md-offset-1 col-md-7">
			<div class="panel-body shadow Compte">
				<a href="{{ path('swap_ajouter_service') }}">
					<button class="btn btn-primary raleway400 text-center col-xs-94 col-xs-offset-1">Ajouter un Swap</button>
				</a>
				<a href="{{path('swap_manage_swap') }}">
					<button class="btn btn-primary raleway400 text-center col-xs-94 col-xs-offset-1">Gérer mes swaps</button>
				</a>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div class="panel-body shadow Compte">
					<span class="titreCompte"><p>Mes notifications</p><span>
					<hr>
					{% for reservation in reservations %}
						{% if reservation.dateDeparture < date %}
							{% if reservation.status != 3 %}
							<div class="notification">
								<div class="row">
									<div class="col-xs-12 col-sm-5">
										<p>Apèrs l'échange que vous avez effectué avec {{ reservation.service.user.username}}</p>
									</div>
									<div class="col-xs-12 col-sm-3">
									<a href="{{ path('swap_send_comment', { 'id': reservation.id }) }}">
										<button class="btn btn-primary raleway400 text-center col-xs-94 col-xs-offset-1">Laisser un commentaire</button>
									</div></a>
									<a href="{{ path('swap_notification_delete', { 'id': reservation.id }) }}">
										<div class="col-offset-xs-12 col-xs-3 col-sm-offset-1 col-sm-2">
											<button class="btn btn-danger raleway400 text-center col-xs-94 col-xs-offset-1">Supprimer</button>
										</div></a>
									</div>
								</div>
							{% endif %}
						{% endif %}
					{% endfor %}
				</div>

			<div class="row">
				<div class="col-md-12">
					<div class="panel-body shadow Compte">
						<span class="titreCompte"><p>Mes demandes reçu</p><span>
						<hr>
				</div>
			<div class="row">
				<div class="col-md-12">
					<div class="panel-body shadow Compte">
						<span class="titreCompte"><p>Mes demandes envoyées</p><span>
						<hr>
				</div>
			<div class="row">
				<div class="col-md-12">
					<div class="panel-body shadow Compte">
						<span class="titreCompte"><p>Prochains services que vous allez recevoir</p><span>
						<table>
						<thead>
							<tr>
								<td>Statut</td>
								<td>Date/Service</td>
								<td>Membre</td>
								<td>Détails</td>
							</tr>
						</thead>
						{% for reservation in reservations %}
							<tbody>
								<tr>
									<td></td>
									<td>
										{{ reservation.service.categorie }}</br>
										Du : </br>
										Au :
									</td>
									<td>
										{{ reservation.service.user.username }}
									</td>
									<td>Détails</td>
								</tr>
							</tbody>
						{% endfor %}
						</table>
				</div>
			<div class="row">
				<div class="col-md-12">
					<div class="panel-body shadow Compte">
						<span class="titreCompte"><p>Prochains service que allez rendre</p><span>
						<table>
						<thead>
							<tr>
								<td>Statut</td>
								<td>Date/Service</td>
								<td>Membre</td>
								<td>Détails</td>
							</tr>
						</thead>
						{% for serviceToRender in servicesToRender %}
							<tbody>
								<tr>
									<td></td>
									<td>
										{{ serviceToRender.service.categorie }}</br>
										Du :  </br>
										Au : 
									</td>
									<td>
										{{ serviceToRender.userReservation.username }}
									</td>
									<td>Détails</td>
								</tr>
							</tbody>
						{% endfor %}
						</table>
				</div>
			<div class="row">
				<div class="col-md-12">
					<div class="panel-body shadow Compte">
						<span class="titreCompte"><p>Historique des services qui vous ont été rendus</p><span>
						<hr>
				</div>
			</div>
			</div>
			</div>
			</div>
			</div>
			</div>
			</div>
		</div>
	</div>
</div>
			
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

{% endblock %}

