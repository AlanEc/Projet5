
<script>
function initialize() {

  var input = document.getElementById('adresse');  
  var autocomplete = new google.maps.places.Autocomplete(input);
  var map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: 48.866667, lng: 2.333333},
      scrollwheel: false,
      zoom: 17
  });

  var zoneMarqueurs = new google.maps.LatLngBounds()
  var tableauMarqueurs = [
    {% for l_l in gps %}
      {{ l_l }}
    {% endfor %}
    ];

  for( var i = 0, I = tableauMarqueurs.length; i < I; i++ ) {
    var latlng = tableauMarqueurs[i],             
    latitude = latlng["lat"],              
    longitude = latlng["lng"];               

    var optionsMarqueur = {
    map: map,
    position: new google.maps.LatLng( latitude, longitude ),
    animation: google.maps.Animation.DROP
    };
    var marqueur = new google.maps.Marker( optionsMarqueur );
    zoneMarqueurs.extend( marqueur.getPosition() );
  }

  autocomplete.addListener('place_changed', function() {
  var place = autocomplete.getPlace();
  if (!place.geometry) {
    window.alert("No details available for input: '" + place.name + "'");
    return;
  }

  if (place.geometry.viewport) {
    map.fitBounds(place.geometry.viewport);
  } else {
    map.setCenter(place.geometry.location);
    map.setZoom(17);  
  }
  });

  var geocoder = new google.maps.Geocoder();
    var address = '{{ adresse }}';

geocoder.geocode( { 'address': address}, function(results, status) {

    if (status == google.maps.GeocoderStatus.OK) {

    map.setZoom(10);
     map.setCenter(results[0].geometry.location);
       map.fitBounds( zoneMarqueurs );


}

});

}
      
  google.maps.event.addDomListener(window, 'load', initialize);
</script>